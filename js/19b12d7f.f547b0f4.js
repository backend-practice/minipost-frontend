(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["19b12d7f"],{"0295":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-chip",{staticClass:"user-chip",attrs:{clickable:""},on:{click:t.goUserProfile}},[o("q-avatar",[o("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:t.user.avatar||n("34dc")}})]),o("span",{staticClass:"q-mx-sm"},[t._v(t._s(t.user.nickname))])],1)},r=[],s={name:"UserChip",props:{user:Object},methods:{goUserProfile:function(){var t="/u/"+this.user.id;this.$route.path!==t&&this.$router.push("/u/"+this.user.id)}}},i=s,a=n("2877"),c=Object(a["a"])(i,o,r,!1,null,"70a84b64",null);e["a"]=c.exports},"1af6":function(t,e,n){var o=n("63b6");o(o.S,"Array",{isArray:n("9003")})},"20fd":function(t,e,n){"use strict";var o=n("d9f6"),r=n("aebd");t.exports=function(t,e,n){e in t?o.f(t,e,r(0,n)):t[e]=n}},"34dc":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDk0LjIgOTQuMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNTYgNjQuOGwyNi42LTI2LjYgOC45IDguOS00NC40IDQ0LjNMMi44IDQ3LjFsOC45LTguOSAzNS40IDM1LjQgOC45LTguOG04LjggOC45TDI5LjQgMzguMyA1NiAxMS43bC04LjktOC45LTM1LjQgMzUuNW03MC44IDBMNDcuMSAyLjhtLTQuNCA0OC43IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OWNjOTkiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+DQo8L3N2Zz4NCg=="},"37c8":function(t,e,n){e.f=n("2b4c")},"3a72":function(t,e,n){var o=n("7726"),r=n("8378"),s=n("2d00"),i=n("37c8"),a=n("86cc").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=s?{}:o.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:i.f(t)})}},"3d02":function(t,e,n){var o=n("774e"),r=n("c8bb");function s(t){if(r(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o(t)}t.exports=s},"454f":function(t,e,n){n("46a7");var o=n("584a").Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},"46a7":function(t,e,n){var o=n("63b6");o(o.S+o.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"4db1":function(t,e,n){var o=n("7c64"),r=n("3d02"),s=n("d8f0");function i(t){return o(t)||r(t)||s()}t.exports=i},"549b":function(t,e,n){"use strict";var o=n("d864"),r=n("63b6"),s=n("241e"),i=n("b0dc"),a=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");r(r.S+r.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,f,d=s(t),p="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,h=void 0!==g,b=0,v=u(d);if(h&&(g=o(g,m>2?arguments[2]:void 0,2)),void 0==v||p==Array&&a(v))for(e=c(d.length),n=new p(e);e>b;b++)l(n,b,h?g(d[b],b):d[b]);else for(f=v.call(d),n=new p;!(r=f.next()).done;b++)l(n,b,h?i(f,g,[r.value,b],!0):r.value);return n.length=b,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"774e":function(t,e,n){t.exports=n("d2d5")},"7bbc":function(t,e,n){var o=n("6821"),r=n("9093").f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==s.call(t)?a(t):r(o(t))}},"7c64":function(t,e,n){var o=n("a745");function r(t){if(o(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}t.exports=r},"824b":function(t,e,n){"use strict";var o=n("93d3"),r=n.n(o);r.a},"85f2":function(t,e,n){t.exports=n("454f")},"8a81":function(t,e,n){"use strict";var o=n("7726"),r=n("69a8"),s=n("9e1e"),i=n("5ca1"),a=n("2aba"),c=n("67ab").KEY,l=n("79e5"),u=n("5537"),f=n("7f20"),d=n("ca5a"),p=n("2b4c"),m=n("37c8"),g=n("3a72"),h=n("d4c0"),b=n("1169"),v=n("cb7c"),y=n("d3f4"),w=n("4bf8"),P=n("6821"),x=n("6a99"),O=n("4630"),C=n("2aeb"),j=n("7bbc"),k=n("11e9"),S=n("2621"),_=n("86cc"),q=n("0d58"),L=k.f,I=_.f,M=j.f,A=o.Symbol,N=o.JSON,D=N&&N.stringify,$="prototype",E=p("_hidden"),F=p("toPrimitive"),T={}.propertyIsEnumerable,z=u("symbol-registry"),J=u("symbols"),G=u("op-symbols"),Q=Object[$],U="function"==typeof A&&!!S.f,R=o.QObject,W=!R||!R[$]||!R[$].findChild,B=s&&l((function(){return 7!=C(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(t,e,n){var o=L(Q,e);o&&delete Q[e],I(t,e,n),o&&t!==Q&&I(Q,e,o)}:I,Z=function(t){var e=J[t]=C(A[$]);return e._k=t,e},V=U&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},H=function(t,e,n){return t===Q&&H(G,e,n),v(t),e=x(e,!0),v(n),r(J,e)?(n.enumerable?(r(t,E)&&t[E][e]&&(t[E][e]=!1),n=C(n,{enumerable:O(0,!1)})):(r(t,E)||I(t,E,O(1,{})),t[E][e]=!0),B(t,e,n)):I(t,e,n)},Y=function(t,e){v(t);var n,o=h(e=P(e)),r=0,s=o.length;while(s>r)H(t,n=o[r++],e[n]);return t},K=function(t,e){return void 0===e?C(t):Y(C(t),e)},X=function(t){var e=T.call(this,t=x(t,!0));return!(this===Q&&r(J,t)&&!r(G,t))&&(!(e||!r(this,t)||!r(J,t)||r(this,E)&&this[E][t])||e)},tt=function(t,e){if(t=P(t),e=x(e,!0),t!==Q||!r(J,e)||r(G,e)){var n=L(t,e);return!n||!r(J,e)||r(t,E)&&t[E][e]||(n.enumerable=!0),n}},et=function(t){var e,n=M(P(t)),o=[],s=0;while(n.length>s)r(J,e=n[s++])||e==E||e==c||o.push(e);return o},nt=function(t){var e,n=t===Q,o=M(n?G:P(t)),s=[],i=0;while(o.length>i)!r(J,e=o[i++])||n&&!r(Q,e)||s.push(J[e]);return s};U||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===Q&&e.call(G,n),r(this,E)&&r(this[E],t)&&(this[E][t]=!1),B(this,t,O(1,n))};return s&&W&&B(Q,t,{configurable:!0,set:e}),Z(t)},a(A[$],"toString",(function(){return this._k})),k.f=tt,_.f=H,n("9093").f=j.f=et,n("52a7").f=X,S.f=nt,s&&!n("2d00")&&a(Q,"propertyIsEnumerable",X,!0),m.f=function(t){return Z(p(t))}),i(i.G+i.W+i.F*!U,{Symbol:A});for(var ot="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;ot.length>rt;)p(ot[rt++]);for(var st=q(p.store),it=0;st.length>it;)g(st[it++]);i(i.S+i.F*!U,"Symbol",{for:function(t){return r(z,t+="")?z[t]:z[t]=A(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),i(i.S+i.F*!U,"Object",{create:K,defineProperty:H,defineProperties:Y,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var at=l((function(){S.f(1)}));i(i.S+i.F*at,"Object",{getOwnPropertySymbols:function(t){return S.f(w(t))}}),N&&i(i.S+i.F*(!U||l((function(){var t=A();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){var e,n,o=[t],r=1;while(arguments.length>r)o.push(arguments[r++]);if(n=e=o[1],(y(e)||void 0!==t)&&!V(t))return b(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!V(e))return e}),o[1]=e,D.apply(N,o)}}),A[$][F]||n("32e9")(A[$],F,A[$].valueOf),f(A,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},"8b24":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"index"},[n("div",{staticClass:"flex flex-center q-my-lg"},[n("div",{staticClass:"content-container col-grow q-gutter-lg"},[n("q-card",{staticClass:"q-pa-md"},[n("q-input",{attrs:{placeholder:t.$t("newPostPlaceholder"),"error-message":t.contentErrorMessage,error:Boolean(t.contentErrorMessage),type:"textarea",outlined:"",autogrow:""},model:{value:t.newPost,callback:function(e){t.newPost=e},expression:"newPost"}}),n("div",{staticClass:"flex justify-between"},[n("user-chip",{attrs:{user:t.currentUser}}),n("q-btn",{staticClass:"q-px-xl",attrs:{label:t.$t("publish"),icon:"ion-ios-send",color:"primary"},on:{click:t.publishPost}})],1)],1),n("q-tabs",{staticClass:"text-grey-7 self-stretch",attrs:{"active-color":"primary","indicator-color":"primary",align:"justify","no-caps":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab",{attrs:{name:"recent",label:t.$t("recent")}}),n("q-tab",{attrs:{name:"feed",label:t.$t("feed")}})],1),n("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"recent"}},[n("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoadRecentPosts},scopedSlots:t._u([{key:"loading",fn:function(){return[n("div",{staticClass:"row justify-center q-my-md"},[n("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[t.recentPosts.length>0?n("div",t._l(t.recentPosts,(function(e,o){return n("mini-post",{key:e.id,attrs:{"mini-post":e},on:{"toggle-like":function(e){return t.toggleRecentPostLike(o)}}})})),1):n("div",{staticClass:"flex flex-center q-ma-lg text-body1"},[n("div",[t._v(t._s(t.$t("noRecentMiniPosts")))])])])],1),n("q-tab-panel",{attrs:{name:"feed"}},[n("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoadFeedPosts},scopedSlots:t._u([{key:"loading",fn:function(){return[n("div",{staticClass:"row justify-center q-my-md"},[n("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[t.feedPosts.length>0?n("div",t._l(t.feedPosts,(function(e,o){return n("mini-post",{key:e.id,attrs:{"mini-post":e},on:{"toggle-like":function(e){return t.toggleFeedPostLike(o)}}})})),1):n("div",{staticClass:"flex flex-center q-ma-lg text-body1"},[n("div",[t._v(t._s(t.$t("noFeedMiniPosts")))])])])],1)],1)],1)])])},r=[],s=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("4db1")),i=n.n(s),a=n("c47a"),c=n.n(a),l=n("2f62"),u=n("9fa7"),f=n("0295");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"PageIndex",components:{UserChip:f["a"],MiniPost:u["a"]},data:function(){return{newPost:"",contentErrorMessage:"",tab:"recent",recentPosts:[],feedPosts:[]}},computed:p({},Object(l["d"])("auth",["currentUser"]),{},Object(l["c"])("auth",["isLoggedIn"])),mounted:function(){this.$axios.get("/posts/").then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},methods:{onLoadRecentPosts:function(t,e){var n=this;console.log("loading recent posts, index "+t),this.$axios.get("/posts/",{params:{offset:this.recentPosts.length}}).then((function(t){var o;(o=n.recentPosts).push.apply(o,i()(t.data.results)),e(n.recentPosts.length>=t.data.count),console.log(t)})).catch((function(t){console.log(t),e(!0)}))},onLoadFeedPosts:function(t,e){var n=this;console.log("loading feed posts, index "+t),this.$axios.get("/posts/feed/",{params:{offset:this.feedPosts.length}}).then((function(t){var o;(o=n.feedPosts).push.apply(o,i()(t.data.results)),e(n.feedPosts.length>=t.data.count),console.log(t)})).catch((function(t){console.log(t),e(!0)}))},toggleRecentPostLike:function(t){this.toggleLike(this.recentPosts[t])},toggleFeedPostLike:function(t){this.toggleLike(this.feedPosts[t])},toggleLike:function(t){t.is_liked?this.$axios.delete("/posts/"+t.id+"/like/").then((function(e){console.log(e),t.is_liked=!1,t.likes_count--})).catch((function(t){console.log(t)})):this.$axios.post("/posts/"+t.id+"/like/").then((function(e){t.is_liked=!0,t.likes_count++,console.log(e)})).catch((function(t){console.log(t)}))},publishPost:function(){var t=this;console.log("publish post"),this.$axios.post("/posts/",{content:this.newPost}).then((function(e){t.recentPosts.unshift(e.data),t.$q.notify({message:t.$t("publishSucceeded"),position:"center",color:"positive",timeout:1e3}),t.newPost="",console.log(e)})).catch((function(e){e.response&&400===e.response.status&&(console.log(e.response.data["content"].join("\n")),t.contentErrorMessage=e.response.data.content.join("\n")),console.log(e)}))}},watch:{newPost:function(){this.contentErrorMessage=""}}},g=m,h=(n("824b"),n("2877")),b=Object(h["a"])(g,o,r,!1,null,"1c05f4ed",null);e["default"]=b.exports},"8e6e":function(t,e,n){var o=n("5ca1"),r=n("990b"),s=n("6821"),i=n("11e9"),a=n("f1ae");o(o.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,o=s(t),c=i.f,l=r(o),u={},f=0;while(l.length>f)n=c(o,e=l[f++]),void 0!==n&&a(u,e,n);return u}})},9003:function(t,e,n){var o=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==o(t)}},"93d3":function(t,e,n){},"95d5":function(t,e,n){var o=n("40c3"),r=n("5168")("iterator"),s=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||s.hasOwnProperty(o(e))}},"990b":function(t,e,n){var o=n("9093"),r=n("2621"),s=n("cb7c"),i=n("7726").Reflect;t.exports=i&&i.ownKeys||function(t){var e=o.f(s(t)),n=r.f;return n?e.concat(n(t)):e}},"9fa7":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-card",{staticClass:"mini-post q-my-lg q-px-md q-pb-md q-gutter-y-md column"},[o("div",{staticClass:"row flex-center"},[o("user-chip",{attrs:{user:t.miniPost.owner}}),o("div",{staticClass:"col-grow text-right"},[t._v(t._s(t.timeCreated))])],1),o("div",{staticClass:"post-content text-body1"},[t._v("\n    "+t._s(t.miniPost.content)+"\n  ")]),o("div",{staticClass:"self-stretch text-right"},[o("q-btn",{class:t.miniPost.is_liked?"text-primary":"",attrs:{flat:"",icon:t.miniPost.is_liked?"thumb_up":"o_thumb_up",label:t.miniPost.likes_count},on:{click:function(e){return t.$emit("toggle-like")}}})],1),t.showComment?o("div",[o("q-input",{attrs:{filled:"",dense:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[o("q-avatar",[o("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:t.miniPost.owner.avatar||n("34dc")}})])]},proxy:!0}],null,!1,2762896681),model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}}),o("div",{staticClass:"relative-position",staticStyle:{"min-height":"50px"}},[t._l(t.comments,(function(e){return o("div",{key:e.id},[o("q-chip",[o("q-avatar",[o("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:e.owner.avatar||n("34dc")}})]),t._v("\n          "+t._s(t.miniPost.owner.nickname)+"\n        ")],1),t._v("\n        "+t._s(e.content)+"\n      ")],1)})),o("q-inner-loading",{attrs:{showing:t.commentLoading}},[o("q-spinner-dots",{attrs:{size:"50px",color:"primary"}})],1)],2)],1):t._e()])},r=[],s=n("0295"),i={name:"MiniPost",components:{UserChip:s["a"]},props:{miniPost:Object},data:function(){return{showComment:!1,newComment:"",commentLoading:!1,commentPageIndex:0,commentPageCount:20,commentsCount:0,comments:[]}},computed:{timeCreated:function(){var t=new Date(this.miniPost.time_created);return t.toLocaleString()}},methods:{toggleComments:function(){var t=this;this.showComment=!this.showComment,this.showComment?(this.commentLoading=!0,this.$axios.get("/posts/"+this.miniPost.id+"/comments/").then((function(e){console.log(e),t.commentsCount=e.data.count,t.comments=e.data.results,t.commentLoading=!1})).catch((function(e){console.log(e),t.commentLoading=!1}))):this.comments=[]}}},a=i,c=n("2877"),l=Object(c["a"])(a,o,r,!1,null,"39a37805",null);e["a"]=l.exports},a745:function(t,e,n){t.exports=n("f410")},c47a:function(t,e,n){var o=n("85f2");function r(t,e,n){return e in t?o(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=r},c8bb:function(t,e,n){t.exports=n("54a1")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},d4c0:function(t,e,n){var o=n("0d58"),r=n("2621"),s=n("52a7");t.exports=function(t){var e=o(t),n=r.f;if(n){var i,a=n(t),c=s.f,l=0;while(a.length>l)c.call(t,i=a[l++])&&e.push(i)}return e}},d8f0:function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=n},f1ae:function(t,e,n){"use strict";var o=n("86cc"),r=n("4630");t.exports=function(t,e,n){e in t?o.f(t,e,r(0,n)):t[e]=n}},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);