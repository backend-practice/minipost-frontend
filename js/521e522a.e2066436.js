(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["521e522a"],{"0295":function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-chip",{staticClass:"user-chip",attrs:{clickable:""},on:{click:t.goUserProfile}},[e("q-avatar",[e("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:t.user.avatar||o("34dc")}})]),e("span",{staticClass:"q-mx-sm"},[t._v(t._s(t.user.nickname))])],1)},n=[],i={name:"UserChip",props:{user:Object},methods:{goUserProfile:function(){var t="/u/"+this.user.id;this.$route.path!==t&&this.$router.push("/u/"+this.user.id)}}},a=i,r=o("2877"),l=Object(r["a"])(a,e,n,!1,null,"70a84b64",null);s["a"]=l.exports},"1af6":function(t,s,o){var e=o("63b6");e(e.S,"Array",{isArray:o("9003")})},"20fd":function(t,s,o){"use strict";var e=o("d9f6"),n=o("aebd");t.exports=function(t,s,o){s in t?e.f(t,s,n(0,o)):t[s]=o}},"34dc":function(t,s){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDk0LjIgOTQuMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNTYgNjQuOGwyNi42LTI2LjYgOC45IDguOS00NC40IDQ0LjNMMi44IDQ3LjFsOC45LTguOSAzNS40IDM1LjQgOC45LTguOG04LjggOC45TDI5LjQgMzguMyA1NiAxMS43bC04LjktOC45LTM1LjQgMzUuNW03MC44IDBMNDcuMSAyLjhtLTQuNCA0OC43IiBmaWxsPSJub25lIiBzdHJva2U9IiM5OWNjOTkiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+DQo8L3N2Zz4NCg=="},"3d02":function(t,s,o){var e=o("774e"),n=o("c8bb");function i(t){if(n(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return e(t)}t.exports=i},4336:function(t,s,o){"use strict";o.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user-profile column flex-center items-stretch q-pa-lg q-gutter-y-lg"},[e("div",{staticClass:"column flex-center q-pa-lg q-gutter-y-md"},[e("q-avatar",{attrs:{size:"100px"}},[e("img",{staticClass:"bg-grey-3 q-pa-sm",attrs:{src:t.user.avatar||o("34dc")}})]),e("div",{staticClass:"row flex-center text-h6"},[e("span",{staticClass:"q-mx-xs"},[t._v(t._s(t.user.nickname))]),1===t.user.gender?e("q-icon",{staticClass:"text-blue-4",attrs:{name:"ion-male"}}):2===t.user.gender?e("q-icon",{staticClass:"text-pink-4",attrs:{name:"ion-female"}}):t._e()],1),e("div",{staticClass:"row flex-center no-wrap q-gutter-x-md"},[e("div",{staticClass:"column flex-center col-4"},[e("div",[t._v(t._s(t.user.posts_count))]),e("div",[t._v(t._s(t.$t("miniPosts")))])]),e("q-separator",{attrs:{vertical:""}}),e("div",{staticClass:"column flex-center col-4"},[e("div",[t._v(t._s(t.user.following_count))]),e("div",[t._v(t._s(t.$t("following")))])]),e("q-separator",{attrs:{vertical:""}}),e("div",{staticClass:"column flex-center col-4"},[e("div",[t._v(t._s(t.user.followers_count))]),e("div",[t._v(t._s(t.$t("followers")))])])],1)],1),e("div",{staticClass:"flex flex-center"},[e("div",{staticClass:"tabs-container col-grow"},[e("q-tabs",{staticClass:"text-grey-7 self-stretch",attrs:{"active-color":"primary","indicator-color":"primary",align:"justify","no-caps":""},model:{value:t.tab,callback:function(s){t.tab=s},expression:"tab"}},[e("q-tab",{attrs:{name:"miniPosts",label:t.$t("miniPosts")}}),e("q-tab",{attrs:{name:"following",label:t.$t("following")}}),e("q-tab",{attrs:{name:"followers",label:t.$t("followers")}})],1),e("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(s){t.tab=s},expression:"tab"}},[e("q-tab-panel",{attrs:{name:"miniPosts"}},[e("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoadPosts},scopedSlots:t._u([{key:"loading",fn:function(){return[e("div",{staticClass:"row justify-center q-my-md"},[e("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},t._l(t.posts,(function(s,o){return e("mini-post",{key:s.id,attrs:{"mini-post":s},on:{"toggle-like":function(s){return t.toggleLike(o)}}})})),1)],1),e("q-tab-panel",{attrs:{name:"following"}},[e("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoadFollowing},scopedSlots:t._u([{key:"loading",fn:function(){return[e("div",{staticClass:"row justify-center q-my-md"},[e("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},t._l(t.following,(function(t){return e("user-info",{key:t.id,attrs:{user:t}})})),1)],1),e("q-tab-panel",{attrs:{name:"followers"}},[e("q-infinite-scroll",{attrs:{offset:250},on:{load:t.onLoadFollowers},scopedSlots:t._u([{key:"loading",fn:function(){return[e("div",{staticClass:"row justify-center q-my-md"},[e("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},t._l(t.followers,(function(t){return e("user-info",{key:t.id,attrs:{user:t}})})),1)],1)],1)],1)])])},n=[],i=o("4db1"),a=o.n(i),r=(o("c5f6"),o("9fa7")),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-card",{staticClass:"user-info q-ma-lg q-pa-sm row q-gutter-x-md "},[e("div",{on:{click:t.goUserProfile}},[e("q-avatar",{attrs:{size:"80px"}},[e("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:t.user.avatar||o("34dc")}})])],1),e("div",{staticClass:"column justify-around col-grow items-start"},[e("div",{staticClass:"row flex-center text-body1"},[e("span",{staticClass:"q-mx-xs",on:{click:t.goUserProfile}},[t._v(t._s(t.user.nickname))]),1===t.user.gender?e("q-icon",{staticClass:"text-blue-4",attrs:{name:"ion-male"}}):2===t.user.gender?e("q-icon",{staticClass:"text-pink-4",attrs:{name:"ion-female"}}):t._e()],1),e("div",{staticClass:"row q-gutter-x-md"},[e("div",[t._v(t._s(t.$t("miniPosts"))+" "+t._s(t.user.posts_count))]),e("div",[t._v(t._s(t.$t("following"))+" "+t._s(t.user.following_count))]),e("div",[t._v(t._s(t.$t("followers"))+" "+t._s(t.user.followers_count))])])])])},c=[],u={name:"UserInfo",props:{user:Object},data:function(){return{}},methods:{goUserProfile:function(){var t="/u/"+this.user.id;console.log(t),this.$route.path!==t&&this.$router.push(t)}}},d=u,f=o("2877"),m=Object(f["a"])(d,l,c,!1,null,"650c5550",null),g=m.exports,p={name:"UserProfile",components:{UserInfo:g,MiniPost:r["a"]},props:{id:Number},data:function(){return{user:{},tab:"miniPosts",posts:[],following:[],followers:[]}},created:function(){this.loadUser(this.id)},beforeRouteUpdate:function(t,s,o){this.tab="miniPosts",this.posts=[],this.following=[],this.followers=[],this.user={},this.loadUser(t.params.id),o()},methods:{loadUser:function(t){var s=this;this.$axios.get("/users/"+t+"/").then((function(t){s.user=t.data,console.log(t)})).catch((function(t){console.log(t)}))},toggleLike:function(t){var s=this.posts[t];s.is_liked?this.$axios.delete("/posts/"+s.id+"/like/").then((function(t){console.log(t),s.is_liked=!1,s.likes_count--})).catch((function(t){console.log(t)})):this.$axios.post("/posts/"+s.id+"/like/").then((function(t){s.is_liked=!0,s.likes_count++,console.log(t)})).catch((function(t){console.log(t)}))},onLoadPosts:function(t,s){var o=this;console.log("loading posts, index "+t),this.$axios.get("/users/"+this.id+"/posts/",{params:{offset:this.posts.length}}).then((function(t){var e;(e=o.posts).push.apply(e,a()(t.data.results)),s(o.posts.length>=t.data.count),console.log(t)})).catch((function(t){console.log(t),s()}))},onLoadFollowing:function(t,s){var o=this;console.log("loading following, index "+t),this.$axios.get("/users/"+this.id+"/following/",{params:{offset:this.following.length}}).then((function(t){var e;(e=o.following).push.apply(e,a()(t.data.results)),s(o.following.length>=t.data.count),console.log(t)})).catch((function(t){console.log(t),s()}))},onLoadFollowers:function(t,s){var o=this;console.log("loading followers, index "+t),this.$axios.get("/users/"+this.id+"/followers/",{params:{offset:this.followers.length}}).then((function(t){var e;(e=o.followers).push.apply(e,a()(t.data.results)),s(o.followers.length>=t.data.count),console.log(t)})).catch((function(t){console.log(t),s()}))}}},h=p,v=(o("f472"),Object(f["a"])(h,e,n,!1,null,"3e6d0c0b",null));s["default"]=v.exports},"4db1":function(t,s,o){var e=o("7c64"),n=o("3d02"),i=o("d8f0");function a(t){return e(t)||n(t)||i()}t.exports=a},"549b":function(t,s,o){"use strict";var e=o("d864"),n=o("63b6"),i=o("241e"),a=o("b0dc"),r=o("3702"),l=o("b447"),c=o("20fd"),u=o("7cd6");n(n.S+n.F*!o("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var s,o,n,d,f=i(t),m="function"==typeof this?this:Array,g=arguments.length,p=g>1?arguments[1]:void 0,h=void 0!==p,v=0,x=u(f);if(h&&(p=e(p,g>2?arguments[2]:void 0,2)),void 0==x||m==Array&&r(x))for(s=l(f.length),o=new m(s);s>v;v++)c(o,v,h?p(f[v],v):f[v]);else for(d=x.call(f),o=new m;!(n=d.next()).done;v++)c(o,v,h?a(d,p,[n.value,v],!0):n.value);return o.length=v,o}})},"54a1":function(t,s,o){o("6c1c"),o("1654"),t.exports=o("95d5")},"774e":function(t,s,o){t.exports=o("d2d5")},"7c64":function(t,s,o){var e=o("a745");function n(t){if(e(t)){for(var s=0,o=new Array(t.length);s<t.length;s++)o[s]=t[s];return o}}t.exports=n},9003:function(t,s,o){var e=o("6b4c");t.exports=Array.isArray||function(t){return"Array"==e(t)}},"95d5":function(t,s,o){var e=o("40c3"),n=o("5168")("iterator"),i=o("481b");t.exports=o("584a").isIterable=function(t){var s=Object(t);return void 0!==s[n]||"@@iterator"in s||i.hasOwnProperty(e(s))}},"9fa7":function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-card",{staticClass:"mini-post q-my-lg q-px-md q-pb-md q-gutter-y-md column"},[e("div",{staticClass:"row flex-center"},[e("user-chip",{attrs:{user:t.miniPost.owner}}),e("div",{staticClass:"col-grow text-right"},[t._v(t._s(t.timeCreated))])],1),e("div",{staticClass:"post-content text-body1"},[t._v("\n    "+t._s(t.miniPost.content)+"\n  ")]),e("div",{staticClass:"self-stretch text-right"},[e("q-btn",{class:t.miniPost.is_liked?"text-primary":"",attrs:{flat:"",icon:t.miniPost.is_liked?"thumb_up":"o_thumb_up",label:t.miniPost.likes_count},on:{click:function(s){return t.$emit("toggle-like")}}})],1),t.showComment?e("div",[e("q-input",{attrs:{filled:"",dense:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-avatar",[e("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:t.miniPost.owner.avatar||o("34dc")}})])]},proxy:!0}],null,!1,2762896681),model:{value:t.newComment,callback:function(s){t.newComment=s},expression:"newComment"}}),e("div",{staticClass:"relative-position",staticStyle:{"min-height":"50px"}},[t._l(t.comments,(function(s){return e("div",{key:s.id},[e("q-chip",[e("q-avatar",[e("img",{staticClass:"bg-grey-3 q-pa-xs",attrs:{src:s.owner.avatar||o("34dc")}})]),t._v("\n          "+t._s(t.miniPost.owner.nickname)+"\n        ")],1),t._v("\n        "+t._s(s.content)+"\n      ")],1)})),e("q-inner-loading",{attrs:{showing:t.commentLoading}},[e("q-spinner-dots",{attrs:{size:"50px",color:"primary"}})],1)],2)],1):t._e()])},n=[],i=o("0295"),a={name:"MiniPost",components:{UserChip:i["a"]},props:{miniPost:Object},data:function(){return{showComment:!1,newComment:"",commentLoading:!1,commentPageIndex:0,commentPageCount:20,commentsCount:0,comments:[]}},computed:{timeCreated:function(){var t=new Date(this.miniPost.time_created);return t.toLocaleString()}},methods:{toggleComments:function(){var t=this;this.showComment=!this.showComment,this.showComment?(this.commentLoading=!0,this.$axios.get("/posts/"+this.miniPost.id+"/comments/").then((function(s){console.log(s),t.commentsCount=s.data.count,t.comments=s.data.results,t.commentLoading=!1})).catch((function(s){console.log(s),t.commentLoading=!1}))):this.comments=[]}}},r=a,l=o("2877"),c=Object(l["a"])(r,e,n,!1,null,"39a37805",null);s["a"]=c.exports},a745:function(t,s,o){t.exports=o("f410")},c8bb:function(t,s,o){t.exports=o("54a1")},d2d5:function(t,s,o){o("1654"),o("549b"),t.exports=o("584a").Array.from},d8aa:function(t,s,o){},d8f0:function(t,s){function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=o},f410:function(t,s,o){o("1af6"),t.exports=o("584a").Array.isArray},f472:function(t,s,o){"use strict";var e=o("d8aa"),n=o.n(e);n.a}}]);